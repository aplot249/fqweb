{"version":3,"sources":["webpack:///./src/views/User/UserRegister.vue","webpack:///./src/views/User/UserRegister.vue?5d32"],"names":["class","id","type","placeholder","registerInfo","username","email","password1","password2","verify","ref","btnSubmit","btnClick","components","vueImgVerify","props","initiator","default","String","emits","setup","emit","verifyRef","store","console","log","value","imgCode","toLowerCase","test","commit","then","res","alert","err","response","data","render"],"mappings":"4IACSA,MAAM,Q,EACP,eAAc,UAAV,SAAK,G,EAED,eAAiB,YAAX,QAAI,G,EACV,eAAgB,YAAV,OAAG,G,EACT,eAAgB,YAAV,OAAG,G,EACT,eAAkB,YAAZ,SAAK,G,EAEX,eAAiB,YAAX,QAAI,G,GAKbC,GAAG,U,uFAbZ,eAiBM,MAjBN,EAiBM,CAhBF,EACA,eAUK,WATD,eAA0G,WAAtG,E,eAAiB,eAAgF,SAAzEC,KAAK,OAAOC,YAAY,iB,qDAA0B,EAAAC,aAAaC,SAAQ,K,mBAArB,EAAAD,aAAaC,cAC3F,eAA+F,WAA3F,E,eAAgB,eAAsE,SAA/DH,KAAK,QAAQC,YAAY,S,qDAAkB,EAAAC,aAAaE,MAAK,K,mBAAlB,EAAAF,aAAaE,WACnF,eAA8G,WAA1G,E,eAAgB,eAAqF,SAA9EJ,KAAK,WAAWC,YAAY,iB,qDAA0B,EAAAC,aAAaG,UAAS,K,mBAAtB,EAAAH,aAAaG,eAC9F,eAAwG,WAApG,E,eAAkB,eAA6E,SAAtEL,KAAK,WAAWC,YAAY,S,qDAAkB,EAAAC,aAAaI,UAAS,K,mBAAtB,EAAAJ,aAAaI,eACxF,eAIM,YAHF,E,eACA,eAAqE,SAA9DN,KAAK,O,qDAAgB,EAAAE,aAAaK,OAAM,IAAEN,YAAY,S,mBAAjC,EAAAC,aAAaK,UACzC,eAAiC,GAAjBC,IAAI,aAAW,cAGvC,eAGM,MAHN,EAGM,CAFF,eAAsC,UAA7B,QAAK,8BAAE,EAAAC,WAAA,EAAAA,UAAA,sBAAW,MAC3B,eAAuC,UAA9B,QAAK,8BAAE,EAAAC,UAAA,EAAAA,SAAA,sBAAU,Y,oDAYnB,GACXC,WAAY,CACRC,aAAA,QAEJC,MAAO,CACHC,UAAW,CACPC,QAAS,GACTf,KAAMgB,SAGdC,MAAO,CACH,gBAEJC,MAbW,SAaLL,EAbK,GAaU,IAAPM,EAAO,EAAPA,KACJC,EAAY,eAAI,MAChBC,EAAQ,iBAEVnB,GADS,iBACM,eAAS,CACxBC,SAAU,GACVC,MAAO,GACPC,UAAW,GACXC,UAAW,GACXC,OAAQ,MAERE,EAAY,WACZa,QAAQC,IAAI,UAAUV,GAClBO,EAAUI,MAAMC,QAAQC,gBAAkBxB,EAAaK,OAAOmB,cAI7D,oBAAoBC,KAAKzB,EAAaC,UAItC,mBAAmBwB,KAAKzB,EAAaE,OAIrC,oBAAoBuB,KAAKzB,EAAaG,WAItC,oBAAoBsB,KAAKzB,EAAaI,YAI3Ce,EAAMO,OAAO,qBAAoB,GACjC,eAAK,gBAAiB,CAClB,SAAY1B,EAAaC,SACzB,MAASD,EAAaE,MACtB,SAAYF,EAAaG,UACzB,UAAaQ,EAAMC,YACpBe,MACC,SAAAC,GACIT,EAAMO,OAAO,qBAAoB,GACjCT,EAAK,eAAe,SACpBY,MAAM,2CAEV,SAAAC,GACIX,EAAMO,OAAO,qBAAoB,GACjCG,MAAMC,EAAIC,SAASC,KAAK,oBAAoB,QAjBhDH,MAAM,YAJNA,MAAM,UAJNA,MAAM,sBAJNA,MAAM,WAJNA,MAAM,UAqCVrB,EAAW,WACXS,EAAK,eAAe,UAExB,MAAO,CAACjB,eAAcO,YAAWC,WAAUU,eC5FvD,EAAOe,OAASA,EAED","file":"js/chunk-2d0ba86b.99c1e435.js","sourcesContent":["<template>\r\n    <div class=\"form\">\r\n        <h2>新用户注册</h2>\r\n        <ul>\r\n            <li><span>用户名：</span><input type=\"text\" placeholder=\"仅限字母、数字（5-15位）\" v-model=\"registerInfo.username\"></li>\r\n            <li><span>邮箱：</span><input type=\"email\" placeholder=\"推荐QQ邮箱\" v-model=\"registerInfo.email\"></li>\r\n            <li><span>密码：</span><input type=\"password\" placeholder=\"仅限字母、数字（5-15位）\" v-model=\"registerInfo.password1\"></li>\r\n            <li><span>确认密码：</span><input type=\"password\" placeholder=\"再次确认密码\" v-model=\"registerInfo.password2\"></li>\r\n            <div>\r\n                <span>验证码：</span>\r\n                <input type=\"text\" v-model=\"registerInfo.verify\" placeholder=\"输入验证码\">\r\n                <vue-img-verify ref=\"verifyRef\"/>\r\n            </div>\r\n        </ul>\r\n        <div id=\"action\">\r\n            <button @click=\"btnSubmit\">注册</button>\r\n            <button @click=\"btnClick\">前去登录</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {ref, reactive, onActivated} from \"vue\";\r\n    import {useStore} from \"vuex\";\r\n    import vueImgVerify from \"@/components/Captcha.vue\"\r\n    import {useRouter} from \"vue-router\";\r\n    import {post} from \"@/network\";\r\n\r\n    export default {\r\n        components: {\r\n            vueImgVerify,\r\n        },\r\n        props: {\r\n            initiator: {\r\n                default: '',\r\n                type: String\r\n            }\r\n        },\r\n        emits: [\r\n            'changeStatus',\r\n        ],\r\n        setup(props, {emit}) {\r\n            const verifyRef = ref(null)\r\n            const store = useStore()\r\n            let router = useRouter()\r\n            let registerInfo = reactive({\r\n                username: '',\r\n                email: '',\r\n                password1: '',\r\n                password2: '',\r\n                verify: ''\r\n            })\r\n            let btnSubmit = () => {\r\n                console.log('props是：',props)\r\n                if (verifyRef.value.imgCode.toLowerCase() !== registerInfo.verify.toLowerCase()) {\r\n                    alert(\"验证码错误\")\r\n                    return;\r\n                }\r\n                if (!/[0-9a-zA-Z]{5,15}/.test(registerInfo.username)) {\r\n                    alert(\"用户名格式不符\")\r\n                    return;\r\n                }\r\n                if (!/\\w+@(qq|163).com/.test(registerInfo.email)) {\r\n                    alert(\"邮箱格式不符，仅支持QQ和163邮箱\")\r\n                    return;\r\n                }\r\n                if (!/[0-9a-zA-Z]{5,15}/.test(registerInfo.password1)) {\r\n                    alert(\"密码格式不符\")\r\n                    return;\r\n                }\r\n                if (!/[0-9a-zA-Z]{5,15}/.test(registerInfo.password2)) {\r\n                    alert(\"确认密码格式不符\")\r\n                    return;\r\n                }\r\n                store.commit('changeLoadingShow',true)\r\n                post(\"/user/create/\", {\r\n                    'username': registerInfo.username,\r\n                    'email': registerInfo.email,\r\n                    'password': registerInfo.password1,\r\n                    'initiator': props.initiator // 注册邀请发起人\r\n                }).then(\r\n                    res => {\r\n                        store.commit('changeLoadingShow',false)\r\n                        emit('changeStatus','login')\r\n                        alert('注册成功，已向你填写的邮箱发送账号激活邮件，请先打开邮箱激活账号，再登录')\r\n                    },\r\n                    err=>{\r\n                        store.commit('changeLoadingShow',false)\r\n                        alert(err.response.data['non_field_errors'][0])\r\n                    }\r\n                )\r\n            }\r\n            let btnClick = () => {\r\n                emit('changeStatus','login')\r\n            }\r\n            return {registerInfo, btnSubmit, btnClick, verifyRef}\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./UserRegister.vue?vue&type=template&id=16c78fe8\"\nimport script from \"./UserRegister.vue?vue&type=script&lang=js\"\nexport * from \"./UserRegister.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}