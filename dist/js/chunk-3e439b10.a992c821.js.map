{"version":3,"sources":["webpack:///./src/views/Others/ChangePasswd.vue?39f0","webpack:///./src/views/Others/ChangePasswd.vue","webpack:///./src/views/Others/ChangePasswd.vue?1b0c"],"names":["class","vpnchangeShow","type","webpasswd","placeholder","webpasswdSubmit","vpnpasswd","vpnpasswdSubmit","name","components","setup","route","test","value","then","res","alert","localStorage","clear","push","err","response","status","console","log","data","detail","render","__scopeId"],"mappings":"yIAAA,W,sICCSA,MAAM,gB,EACP,eAAa,UAAT,QAAI,G,YAGJ,eAAyB,UAArB,oBAAgB,G,YAIpB,eAAsB,YAAhB,aAAS,G,YAKf,eAAsB,YAAhB,aAAS,G,wEAbvB,eAiBM,MAjBN,EAiBM,CAhBF,EACA,eAIK,WAHS,EAAAC,e,iBAAV,eAAiD,OAAxB,wB,sBACzB,EACU,EAAAA,e,iBAAV,eAAsE,OAA7C,6C,wBAE7B,eAIM,YAHF,E,eACA,eAAoE,SAA7DC,KAAK,O,qDAAgB,EAAAC,UAAS,IAAEC,YAAY,kB,mBAAvB,EAAAD,aAC5B,eAA4C,UAAnC,QAAK,8BAAE,EAAAE,iBAAA,EAAAA,gBAAA,sBAAiB,QAE1B,EAAAJ,e,iBAAX,eAIM,SAHF,E,eACA,eAAoE,SAA7DC,KAAK,O,qDAAgB,EAAAI,UAAS,IAAEF,YAAY,kB,mBAAvB,EAAAE,aAC5B,eAA4C,UAAnC,QAAK,8BAAE,EAAAC,iBAAA,EAAAA,gBAAA,sBAAiB,S,mDAU1B,GACXC,KAAM,eACNC,WAAY,GACZC,MAHW,WAIP,IAAIP,EAAY,eAAI,IAChBG,EAAY,eAAI,OAChBL,EAAgB,gBAAI,GACpBU,EAAQ,iBACRN,EAAkB,WACd,oBAAoBO,KAAKT,EAAUU,OACnC,eAAM,qBAAsB,CAAC,SAAYV,EAAUU,MAAO,KAAQ,KAAKC,MACnE,SAAAC,GACIC,MAAM,oBACNC,aAAaC,QACbP,EAAMQ,KAAK,QAEf,SAAAC,GAC+B,OAAvBA,EAAIC,SAASC,QACbC,QAAQC,IAAI,qBAKxBrB,EAAUU,MAAQ,GAClBG,MAAM,YAGVT,EAAkB,WACd,oBAAoBK,KAAKN,EAAUO,OACnC,eAAK,wBAAyB,CAAC,WAAcP,EAAUO,QAAQC,MAC3D,SAAAC,GACIQ,QAAQC,IAAIT,EAAIU,MAChBnB,EAAUO,MAAQE,EAAIU,KACtBT,MAAM,kBAIdV,EAAUO,MAAQ,GAClBG,MAAM,YAYd,OATA,gBAAU,WACN,eAAI,eAAeF,MAGf,SAAAC,GAAE,OAAKA,EAAIU,KAAKC,OAASzB,EAAcY,OAAQ,EAAQZ,EAAcY,OAAQ,KAE7E,SAAAO,GAAE,OAAKnB,EAAcY,OAAQ,QAG9B,CAACV,YAAWG,YAAWD,kBAAiBE,kBAAiBN,mB,UCvE5E,EAAO0B,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-3e439b10.a992c821.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChangePasswd.vue?vue&type=style&index=0&id=9c3ef73a&scoped=true&lang=scss\"","<template>\r\n    <div class=\"changepasswd\">\r\n        <h2>更改密码</h2>\r\n        <ul>\r\n            <li v-if=\"vpnchangeShow\">网站的登录密码和翻墙软件的账号密码不同</li>\r\n            <li>网站登录密码只关系到本网站的登录</li>\r\n            <li v-if=\"vpnchangeShow\">翻墙账号密码只关系到翻墙软件里账号的登录，该密码为账号初始化时创建，默认为123</li>\r\n        </ul>\r\n        <div>\r\n            <span>更改网站登录密码：</span>\r\n            <input type=\"text\" v-model=\"webpasswd\" placeholder=\"仅限字母、数字（5-15位）\">\r\n            <button @click=\"webpasswdSubmit\">提交</button>\r\n        </div>\r\n        <div v-if=\"vpnchangeShow\">\r\n            <span>更改翻墙账号密码：</span>\r\n            <input type=\"text\" v-model=\"vpnpasswd\" placeholder=\"仅限字母、数字（3-15位）\">\r\n            <button @click=\"vpnpasswdSubmit\">提交</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {ref, onMounted} from \"vue\";\r\n    import {patch, post, get} from \"@/network\";\r\n    import {useRouter} from \"vue-router\";\r\n\r\n    export default {\r\n        name: \"ChangePasswd\",\r\n        components: {},\r\n        setup() {\r\n            let webpasswd = ref('')\r\n            let vpnpasswd = ref('123')\r\n            let vpnchangeShow = ref(false)\r\n            let route = useRouter()\r\n            let webpasswdSubmit = () => {\r\n                if (/[0-9a-zA-Z]{5,15}/.test(webpasswd.value)) {\r\n                    patch('/user/resetpasswd/', {'password': webpasswd.value, 'code': ''}).then(\r\n                        res => {\r\n                            alert(\"网站密码更改成功,跳转去重新登录\")\r\n                            localStorage.clear()\r\n                            route.push('/')\r\n                        },\r\n                        err => {\r\n                            if (err.response.status == '429') {\r\n                                console.log(\"你操作的太频繁，请稍后再试\")\r\n                            }\r\n                        }\r\n                    )\r\n                } else {\r\n                    webpasswd.value = ''\r\n                    alert(\"密码格式不符\")\r\n                }\r\n            }\r\n            let vpnpasswdSubmit = () => {\r\n                if (/[0-9a-zA-Z]{3,15}/.test(vpnpasswd.value)) {\r\n                    post('/vpn/noderesetpasswd/', {'nodepasswd': vpnpasswd.value}).then(\r\n                        res => {\r\n                            console.log(res.data)\r\n                            vpnpasswd.value = res.data\r\n                            alert(\"翻墙账号密码更改成功\")\r\n                        }\r\n                    )\r\n                } else {\r\n                    vpnpasswd.value = ''\r\n                    alert(\"密码格式不符\")\r\n                }\r\n            }\r\n            onMounted(() => {\r\n                get('/vpn/check/').then(\r\n                    // res.data.detail 结果为真，就是已经过期，转为填写注册码 isnewer.value = true\r\n                    // res => console.log(res.data.detail),\r\n                    res => res.data.detail ? vpnchangeShow.value = false : vpnchangeShow.value = true,\r\n                    // err => console.log(err.response.data.detail),\r\n                    err => vpnchangeShow.value = false //新注册的，还没有账号，转为填注册码\r\n                )\r\n            })\r\n            return {webpasswd, vpnpasswd, webpasswdSubmit, vpnpasswdSubmit, vpnchangeShow}\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .changepasswd {\r\n        width: 100%;\r\n        height: 100%;\r\n\r\n        h2 {\r\n            text-align: center;\r\n        }\r\n\r\n        ul {\r\n            width: 80%;\r\n            padding-left: 10%;\r\n            font-size: small;\r\n            color: red;\r\n        }\r\n\r\n        div {\r\n            width: 80%;\r\n            margin: 30px auto;\r\n            text-align: center;\r\n            display: flex;\r\n            flex-direction: column;\r\n\r\n            * {\r\n                display: block;\r\n                height: 40px;\r\n                line-height: 40px;\r\n                margin-bottom: 5px;\r\n                /*margin: 10px auto;*/\r\n            }\r\n\r\n            button {\r\n                border-radius: 30px;\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./ChangePasswd.vue?vue&type=template&id=9c3ef73a&scoped=true\"\nimport script from \"./ChangePasswd.vue?vue&type=script&lang=js\"\nexport * from \"./ChangePasswd.vue?vue&type=script&lang=js\"\n\nimport \"./ChangePasswd.vue?vue&type=style&index=0&id=9c3ef73a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-9c3ef73a\"\n\nexport default script"],"sourceRoot":""}