{"version":3,"sources":["webpack:///./src/views/Douyin.vue","webpack:///./src/views/Douyin.vue?17a1","webpack:///./src/views/Douyin.vue?6c35"],"names":["class","type","douyin","btnSubmit","disabled","isdisabled","btnText","refresh","douyinList","item","index","src","img","alt","title","pageBefore","pageNext","name","components","setup","currentPage","pageMaxNum","getAllData","value","Math","ceil","length","alert","test","then","res","console","log","data","count","sid","setInterval","clearInterval","results","next","pre","render","__scopeId"],"mappings":"sNACSA,MAAM,kB,EACP,eAAe,UAAX,UAAM,G,EACV,eAIK,WAHD,eAA+B,UAA3B,0BACJ,eAAsB,UAAlB,iBACJ,eAAyB,UAArB,sB,MAEHA,MAAM,Q,EACP,eAAwB,YAAlB,eAAW,G,GAGhBA,MAAM,U,EAIX,eAAI,mB,GACCA,MAAM,Q,GACFA,MAAM,Q,GAKVA,MAAM,U,wEAtBf,eA0BM,MA1BN,EA0BM,CAzBF,EACA,EAKA,eAGM,MAHN,EAGM,CAFF,E,eACA,eAAoC,SAA7BC,KAAK,O,qDAAgB,EAAAC,OAAM,K,mBAAN,EAAAA,YAEhC,eAGM,MAHN,EAGM,CAFF,eAAqF,UAA5E,QAAK,8BAAE,EAAAC,WAAA,EAAAA,UAAA,qBAAYC,WAAU,EAAAC,Y,eAA6B,EAAAC,SAAO,gBAC1E,eAAsC,UAA7B,QAAK,8BAAE,EAAAC,SAAA,EAAAA,QAAA,sBAAS,UAE7B,EACA,eAKM,MALN,EAKM,E,mBAJF,eAGM,2BAHmC,EAAAC,YAAU,SAAzBC,EAAKC,G,wBAA/B,eAGM,MAHN,EAGM,CAFF,eAA0C,OAApCC,IAAKF,EAAKG,IAAKC,IAAI,kB,gBACzB,eAA2B,2BAAnBJ,EAAKK,OAAK,Q,QAG1B,eAGM,MAHN,EAGM,CAFF,eAAwC,UAA/B,QAAK,8BAAE,EAAAC,YAAA,EAAAA,WAAA,sBAAY,OAC5B,eAAsC,UAA7B,QAAK,8BAAE,EAAAC,UAAA,EAAAA,SAAA,sBAAU,c,YASnB,GACXC,KAAM,SACNC,WAAY,GACZC,MAHW,WAIP,IAAId,EAAa,gBAAI,GACjBC,EAAU,eAAI,MACdJ,EAAS,eAAI,IACbM,EAAa,eAAI,IACjBY,EAAc,eAAI,GAClBC,EAAa,iBACbd,EAAU,WACVe,IACAF,EAAYG,MAAQ,GAEpBR,EAAa,WACVK,EAAYG,MAAQ,IAEnBH,EAAYG,OAAS,IAGzBP,EAAW,WAERI,EAAYG,MAAQC,KAAKC,KAAKJ,EAAWE,MAAM,KAC9CH,EAAYG,OAAS,IAGzBpB,EAAY,WACZ,IAAKD,EAAOqB,MAAMG,OAEd,OADAC,MAAM,WACC,EAEX,IAAK,qCAAqCC,KAAK1B,EAAOqB,OAElD,OADAI,MAAM,cACC,EAEXtB,EAAWkB,OAAQ,EACnB,eAAK,kBAAmB,CAAC,cAAiBrB,EAAOqB,QAAQM,MACrD,SAAAC,GACIC,QAAQC,IAAIF,EAAIG,MAChB/B,EAAOqB,MAAQ,MAGvB,IAAIW,EAAQ,GACRC,EAAMC,aAAY,WACJ,IAAVF,GACAZ,IACAjB,EAAWkB,OAAQ,EACnBjB,EAAQiB,MAAQ,KAChBc,cAAcF,KAEd7B,EAAQiB,MAAR,eAAwBW,EAAxB,KACAA,GAAS,KAEd,MAEHZ,EAAa,WACb,eAAI,gBAAD,OAAiBF,EAAYG,QAASM,MACrC,SAAAC,GACIC,QAAQC,IAAIF,EAAIG,MAChB,IAAIA,EAAOH,EAAIG,KAAKK,QACpBjB,EAAWE,MAAQO,EAAIG,KAAKC,MAK5B1B,EAAWe,MAAQU,MAU/B,OANA,gBAAU,WACNX,OAEJ,eAAMF,GAAY,SAACmB,EAAKC,GACpBlB,EAAWF,EAAYG,UAEpB,CAACrB,SAAQM,aAAYL,YAAWI,UAASF,aAAYC,UAAQS,aAAWC,c,UCxG3F,EAAOyB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,oCCRf,W","file":"js/chunk-e26d2bf2.762166c6.js","sourcesContent":["<template>\r\n    <div class=\"douyin-content\">\r\n        <h2>抖音视频互动</h2>\r\n        <ul>\r\n            <li>提交你抖音视频的分享链接，本站将解析对应视频</li>\r\n            <li>视频是无水印版的，支持下载</li>\r\n            <li>视频可以供本站所有用户观看和评论</li>\r\n        </ul>\r\n        <div class=\"info\">\r\n            <span>输入抖音视频分享链接：</span>\r\n            <input type=\"text\" v-model=\"douyin\">\r\n        </div>\r\n        <div class=\"action\">\r\n            <button @click=\"btnSubmit\" :disabled=\"isdisabled ? true : false\">{{btnText}}</button>\r\n            <button @click=\"refresh\">获取最新</button>\r\n        </div>\r\n        <hr>\r\n        <div class=\"list\">\r\n            <div class=\"item\" v-for=\"(item,index) in douyinList\">\r\n                <img :src=\"item.img\" alt=\"{{item.title}}\">\r\n                <span>{{item.title}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"action\">\r\n            <button @click=\"pageBefore\">上一页</button>\r\n            <button @click=\"pageNext\">下一页</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {get, post} from \"@/network\";\r\n    import {ref, onMounted,watch} from 'vue'\r\n\r\n    export default {\r\n        name: \"Douyin\",\r\n        components: {},\r\n        setup() {\r\n            let isdisabled = ref(false)\r\n            let btnText = ref(\"提交\")\r\n            let douyin = ref('')\r\n            let douyinList = ref([])\r\n            let currentPage = ref(1)\r\n            let pageMaxNum = ref()\r\n            let refresh = () => {\r\n                getAllData()\r\n                currentPage.value = 1\r\n            }\r\n            let pageBefore = ()=>{\r\n                if(currentPage.value > 1){\r\n                    // console.log('变化之前：',currentPage.value)\r\n                    currentPage.value -= 1\r\n                }\r\n            }\r\n            let pageNext = ()=>{\r\n                // console.log('变化之前：',currentPage.value)\r\n                if(currentPage.value < Math.ceil(pageMaxNum.value/6)){\r\n                    currentPage.value += 1\r\n                }\r\n            }\r\n            let btnSubmit = () => {\r\n                if (!douyin.value.length) {\r\n                    alert(\"链接不能为空\")\r\n                    return false\r\n                }\r\n                if (!/https:\\/\\/mp.weixin.qq.com\\/s\\/\\w+/.test(douyin.value)) {\r\n                    alert(\"公众号文章链接错误\")\r\n                    return false\r\n                }\r\n                isdisabled.value = true\r\n                post(\"/others/douyin/\", {'vx_share_link': douyin.value}).then(\r\n                    res => {\r\n                        console.log(res.data)\r\n                        douyin.value = ''\r\n                    }\r\n                )\r\n                let count = 30\r\n                let sid = setInterval(() => {\r\n                    if (count === 0) {\r\n                        getAllData()\r\n                        isdisabled.value = false\r\n                        btnText.value = \"提交\"\r\n                        clearInterval(sid)\r\n                    } else {\r\n                        btnText.value = `正在处理(${count})`\r\n                        count -= 1\r\n                    }\r\n                }, 1000)\r\n            }\r\n            let getAllData = () => {\r\n                get(`/video/?page=${currentPage.value}`).then(\r\n                    res => {\r\n                        console.log(res.data)\r\n                        let data = res.data.results\r\n                        pageMaxNum.value = res.data.count\r\n                        // let newData = data.filter((val) => {\r\n                        //     return val['vx_name']\r\n                        // })\r\n                        // console.log(newData)\r\n                        douyinList.value = data\r\n                    }\r\n                )\r\n            }\r\n            onMounted(() => {\r\n                getAllData()\r\n            })\r\n            watch(currentPage,(next,pre)=>{\r\n                getAllData(currentPage.value)\r\n            })\r\n            return {douyin, douyinList, btnSubmit, refresh, isdisabled, btnText,pageBefore,pageNext}\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .douyin-content {\r\n        width: 100%;\r\n        height: 100%;\r\n\r\n        h2 {\r\n            text-align: center;\r\n        }\r\n        ul{\r\n            /*text-align: center;*/\r\n            padding-left: 10%;\r\n            font-size: small;\r\n            color: red;\r\n        }\r\n        hr {\r\n            width: 85%;\r\n        }\r\n\r\n        .info {\r\n            text-align: center;\r\n            width: inherit;\r\n\r\n            span {\r\n                display: inline-block;\r\n                width: 30%;\r\n            }\r\n\r\n            input {\r\n                display: inline-block;\r\n                width: 80%;\r\n                height: 30px;\r\n            }\r\n        }\r\n\r\n        .action {\r\n            text-align: center;\r\n\r\n            button {\r\n                /*padding:10px;*/\r\n                width: 100px;\r\n                height: 40px;\r\n                margin: 10px 5px;\r\n                background-color: white;\r\n                border: 1px solid;\r\n                border-radius: 30px;\r\n            }\r\n        }\r\n\r\n        .list{\r\n            width: 85%;\r\n            margin: auto;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-content: space-between;\r\n            flex-flow: row wrap;\r\n            .item{\r\n                margin: 5px 0;\r\n                /*border: 1px solid;*/\r\n                background-color: pink;\r\n                width: 150px;\r\n                img{\r\n                    width: 150px;\r\n                    height: 150px;\r\n                }\r\n                span{\r\n                    display: block;\r\n                    text-align: center;\r\n                    font-size: small;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./Douyin.vue?vue&type=template&id=dec6df94&scoped=true\"\nimport script from \"./Douyin.vue?vue&type=script&lang=js\"\nexport * from \"./Douyin.vue?vue&type=script&lang=js\"\n\nimport \"./Douyin.vue?vue&type=style&index=0&id=dec6df94&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-dec6df94\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Douyin.vue?vue&type=style&index=0&id=dec6df94&scoped=true&lang=scss\""],"sourceRoot":""}